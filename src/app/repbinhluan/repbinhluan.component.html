<div class="fillterbak">
  <div class="bak">
    <div class="container-fluid">
      <div class="search-hero">
        <label style="font-size: 26px; font-weight: 600; line-height: 53px;">Đánh giá / Bình luận</label>
        <input (keyup)="inputsearch()" class="form-control" type="text" name="search" [(ngModel)]="searchText"
          autocomplete="off" placeholder="&#61442; Tên sản phẩm tìm kiếm">
      </div>
      <div class="filter">
        <div class="d-flex justify-content-center">
          <div class="inline">
            <ng-container *ngFor="let obj of alllsp">
              <div class="btn-group">
                <button class="button" (click)="loaddetaillsp(obj._id, obj.tendanhmuc)">{{obj.tendanhmuc | uppercase}}</button>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="filter">
        <div class="d-flex justify-content-center">
          <div class="inline" *ngFor="let obj of lspth, let i=index">
            <ng-container *ngFor="let i of obj.thuonghieu">
              <div class="btn-group-vertical">
                <button class="buttonth" id="lspth_{{obj._id}}" (click)="loadtensp(obj._id+','+i)">{{i}}</button>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="filter">
        <div>
          <ng-container *ngIf="tensanpham.length > 0">
            <table class="table table-striped" style="text-align: center">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Tên sản phẩm</th>
                  <th>Thương hiệu</th>
                  <th>Giá bán</th>
                  <th>Giảm giá</th>
                </tr>
              </thead>
              <tbody>
                <tr id="tr_{{item._id}}" (click)="loaddanhgia(item._id)" *ngFor="let item of tensanpham | paginate: {id: 'pagination2', itemsPerPage: 5, currentPage: p}; let i=index">
                  <td>{{(i+1)+((p-1)*8)}}</td>
                  <td>{{item.ten}}</td>
                  <td>{{item.thuonghieu}}</td>
                  <td>{{item.giaban}}</td>
                  <td>{{item.giamgia}}</td>
                </tr>
              </tbody>
            </table>
            <pagination-controls id='pagination2' (pageChange)="p = $event"></pagination-controls>
          </ng-container>
        </div>
      </div>
      <div class="filter">
        <mat-form-field id="datedanhgia" style="float: right; padding-top: 10px;">
          <input id="dateinput" [(ngModel)]="this.date" (ngModelChange)="modelChangeddanhgia($event)" matInput [matDatepicker]="picker" placeholder="chọn ngày">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      <div class="filter filter-danhgia" *ngIf="items_danhgia.length>0">
        
        <label style="font-size: 26px; font-weight: 600; line-height: 53px;">Danh sách đánh giá</label>
        <div class="d-flex justify-content-center">
          <ul>
            <div class="inline box-danhgia" *ngFor="let item_danhgia of items_danhgia | paginate: {id: 'paginationdg', itemsPerPage: 10, currentPage: pdg}, let i=index">
              <hr>
              <li class="danhgia-list">
                <div>
                  <span class="danhgia-name">{{item_danhgia.ten}} </span>
                </div>
                <div>
                  <p>
                    <span>
                      <div style="float:left">
                        <div style="float: left;" *ngFor='let i of arrayOne(item_danhgia.sosao)'>
                          <i style="color: #fc9639;" class="fa fa-star" aria-hidden="true"></i>
                        </div>
                        <div style="float: left;" *ngFor='let i of arrayTwo(item_danhgia.sosao)'>
                          <i class="fa fa-star" aria-hidden="true"></i>
                        </div>
                        <p></p>
                      </div>
                    </span>
                    <i style="margin-left: 10px;">{{item_danhgia.noidung}}
                    </i>
                  </p>
                </div>
              </li>
              <ng-container *ngIf="show(item_danhgia._id).length>0">
                <li>
                  <div *ngFor="let item of show(item_danhgia._id)">
                    <div class="rep-comment-info-dg">
                      <div>
                        <span>{{item.ten}}
                          <label class="qtv" *ngIf="item.chucdanh==true">QTV</label>
                        </span>
                      </div>
                      <div>
                        <p>
                          <i>{{item.noidung}}</i>
                        </p>
                      </div>
                    </div>
                  </div>
                  
                </li>
              </ng-container>
              <div class="reply-danhgia" id="reply_danhgiaphu{{item_danhgia._id}}">
                <a href="javascript:void(0)" (click)="show_box_danhgiaphu(item_danhgia._id)">
                  Trả lời đánh giá
                </a>
              </div>

              <div id="reply_box_danhgiaphu{{item_danhgia._id}}" class="reply-box" style="display: none;"> 
                <textarea id="text_danhgiaphu{{item_danhgia._id}}" 
                style="border: 1px solid #ddd;border-radius: 4px;-webkit-border-radius: 4px;font-size: 14px;color: #999;padding: 8px;width: 50vw;margin-top: 0px;margin-bottom: 0px;height: 58px;margin-left: 30px;">
                </textarea>
                <a style="padding: 9px 10px; border: 1px solid #288ad6; background: #fff;font-size: 13px;color: #288ad6;border-radius: 4px;height: 36px;margin-left: 10px;" (click)="insertdphu()">Trả lời</a>
              </div>
            </div>
            <pagination-controls  id="paginationdg" (pageChange)="pdg = $event"></pagination-controls>
          </ul>
        </div>
      </div>
      <div class="filter notification-null" *ngIf="items_danhgia.length==0 && active_null_dg == true">
        <label>Danh sách đáng giá của sản phẩm đang rỗng !!!</label>
      </div>
      </div>
      <div class="filter">
        <mat-form-field id="datebinhluan" style="float: right; padding-top: 10px;">
          <input id="dateinputbl" [(ngModel)]="this.date1" (ngModelChange)="modelChangedbinhluan($event)" matInput [matDatepicker]="picker1" placeholder="chọn ngày">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
      <div class="filter filter-binhluan" *ngIf="items_binhluan.length>0">
        <label style="font-size: 26px; font-weight: 600; line-height: 53px;">Danh sách bình luận</label>
        <div class="d-flex justify-content-center">
          <ul>
            <div class="inline box-binhluan" *ngFor="let item_binhluan of items_binhluan | paginate: {id: 'paginationbl', itemsPerPage: 10, currentPage: pbl}, let i=index">
              <hr>
              <li class="binhluan-list">
                <div>
                  <span class="binhluan-name"> {{item_binhluan.ten}} </span>
                </div>
                <div>
                  <p>
                    <i style="margin-left: 10px;">{{item_binhluan.noidung}}</i>
                  </p>
                </div>
              </li>
              <ng-container *ngIf="show_bl(item_binhluan._id).length>0">
                <li>
                  <div *ngFor="let item of show_bl(item_binhluan._id)">
                    <div class="rep-comment-info-bl">
                      <div>
                        <span>{{item.ten}}
                          <label class="qtv" *ngIf="item.chucdanh==true">QTV</label>
                        </span>
                      </div>
                      <div>
                        <p>
                          <i>{{item.noidung}}</i>
                        </p>
                      </div>
                    </div>
                  </div>
                </li>
              </ng-container>
              <div class="reply-binhluan" id="reply_binhluanphu{{item_binhluan._id}}">
                <a href="javascript:void(0)" (click)="show_box_binhluanphu(item_binhluan._id)">
                  Trả lời bình luận
                </a>
                
              </div>
              <div id="reply_box_binhluanphu{{item_binhluan._id}}" class="reply-box" style="display: none;"> 
                <textarea id="text_binhluanphu{{item_binhluan._id}}" style="border: 1px solid #ddd;border-radius: 4px;-webkit-border-radius: 4px;font-size: 14px;color: #999;width: 50vw;margin-top: 0px;margin-bottom: 0px;height: 58px;margin-left: 30px;">
                </textarea>
                <a style="padding: 9px 10px; border: 1px solid #288ad6; background: #fff;font-size: 13px;color: #288ad6;border-radius: 4px;height: 36px;margin-left: 10px;" (click)="insertblp()">Trả lời</a>
              </div>
              
            </div>
            <pagination-controls id="paginationbl" (pageChange)="pbl = $event"></pagination-controls>
          </ul>
        </div>
      </div>
      <div class="filter notification-null" *ngIf="items_binhluan.length==0 && active_null_bl == true">
        <label>Danh sách bình luận của sản phẩm đang rỗng !!!</label>
      </div>
      </div>
    </div>
  </div>
</div>
